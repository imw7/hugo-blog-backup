+++
title='使用Linux遇到的问题'
tags=["Linux", "Ubuntu", "Firefox", "HDMI"]
categories=["其他"]
date="2021-04-29T21:55:28+08:00"
toc=false
draft=false

+++
本文记录在`Linux`使用过程中，遇到的一些问题。<!--more-->

## 问题1

在 `Ubuntu` 上使用 `Firefox` 播放[B站](https://www.bilibili.com)时发现需要安装 `Flash Player`，非常不方便，而且 `Flash Player` 结束支持了。如何解决这个问题呢？<!--more-->

幸好在 `Ubuntu` 上还能使用 `html 5`，使用 `html 5` 播放B站视频的方法。

```bash
sudo apt install ubuntu-restricted-extras
```

意外收获，不知道为什么竟然同时解决了 `Google Chrome` 浏览器不显示博客代码的问题，这个问题可是困扰我很久了呀，真是开心。

## 问题2

`NVIDIA`显卡通过`HDMI`连接电脑和显示器后，显示器不能正常显示画面。

解决办法是通过英伟达[驱动](https://www.nvidia.cn/Download/index.aspx?lang=cn)官网，根据自己的显卡型号下载相对应的显卡驱动。比如下载的是：`NVIDIA-Linux-x86_64-510.60.02.run`。执行：

```bash
$ sudo bash NVIDIA-Linux-x86_64-510.60.02.run
```

在弹出的界面中，一直选“继续”就可以了。安装完成后，显示器就能正常显示画面了。

## 问题3

当问题2解决之后，会发现单独使用笔记本电脑时无法显示界面，只需要在`/etc/X11`目录下将`xorg.conf`中的内容清空即可。

```bash
$ cd /etc/X11
$ sudo cp xorg.conf xorg.conf.tv // 备份
$ sudo rm xorg.conf
$ sudo mv xorg.conf.nvidia-xconfig-original xorg.conf
$ reboot
```

重启电脑后，笔记本电脑就可以正常显示画面了。

要想让外接显示器正常显示，只需要将 `xorg.conf.tv` 中的内容赋值到 `xorg.conf` 中，然后重启电脑就可以了。

能使显示正常显示画面，同时让笔记本电脑不显示画面的文件`xorg.conf.tv`中的内容是：

```bash
# nvidia-xconfig: X configuration file generated by nvidia-xconfig
# nvidia-xconfig:  version 510.60.02

Section "ServerLayout"
    Identifier     "Layout0"
    Screen      0  "Screen0"
    InputDevice    "Keyboard0" "CoreKeyboard"
    InputDevice    "Mouse0" "CorePointer"
EndSection

Section "Files"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/psaux"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
EndSection

Section "Monitor"
    Identifier     "Monitor0"
    VendorName     "Unknown"
    ModelName      "Unknown"
    Option         "DPMS"
EndSection

Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BusID          "PCI:1:0:0"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    SubSection     "Display"
        Depth       24
    EndSubSection
EndSection
```

## 问题4

`Ubuntu` 系统卡死，鼠标不能动，直接强制关机不安全，可以采用以下方法安全重启系统：

1、 同时按住 `Ctrl` 和 `Alt` 键，执行2、3步骤都一直按着。

2、按顺序按一下键盘的 `PrtSc` 键（或者 `SysRq` 键）、`R` 键、`E` 键。

3、再依次按下  `I`、`S`、`U`、`B` 键。

## 问题5

`Ubuntu`重启等待时间长，大约1分30秒。

```bash
sudo su  # 成为root用户
vim /etc/systemd/system.conf
```

修改一下内容：

```bash
#DefaultTimeoutStartSec=90s
#DefaultTimeoutStopSec=90s
```

改为：

```bash
DefaultTimeoutStartSec=3s # 将#去掉，90改为3
DefaultTimeoutStopSec=3s
```

然后，加载修改的配置：

```bash
systemctl daemon-reload
```



